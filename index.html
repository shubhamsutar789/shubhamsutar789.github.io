<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Spark</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Feather Icons for modern icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        /* --- CSS Variables and Base Styles --- */
        :root {
            --blue-600: #2563eb;
            --blue-700: #1d4ed8;
            --blue-800: #1e40af;
            --blue-100: #dbeafe;
            --blue-50: #eff6ff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6; /* Added for subtle hover */
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --red-50: #fef2f2;
            --red-100: #fee2e2;
            --red-300: #fca5a5;
            --red-400: #f87171;
            --red-500: #ef4444;
            --red-600: #dc2626;
            --red-700: #b91c1c;
            --green-600: #16a34a;
            --green-700: #15803d;
            --white: #ffffff;
            --black: #000000;

            --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --ease-in-out-quad: cubic-bezier(0.45, 0.03, 0.52, 0.96);
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--gray-50);
            color: var(--gray-800);
            margin: 0;
            line-height: 1.6; /* Improved readability */
            -webkit-font-smoothing: antialiased; /* Better font rendering */
            -moz-osx-font-smoothing: grayscale; /* Better font rendering */
        }

        .container {
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
        }

        /* --- Buttons --- */
        .btn {
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
            transition: all 0.3s var(--ease-out-quad); /* Smoother transition */
            display: inline-flex; /* Use flex for alignment with icons */
            align-items: center; /* Center content vertically */
            justify-content: center; /* Center content horizontally */
            text-decoration: none;
            border: none;
            cursor: pointer;
            gap: 0.5rem; /* Space between text and icon */
        }
        .btn:hover {
            transform: translateY(-3px) scale(1.02); /* More noticeable hover */
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1); /* Enhanced shadow */
        }
        .btn:active { /* Add active (press) state */
            transform: translateY(0) scale(0.98);
            box-shadow: 0 2px 4px -2px rgba(0,0,0,0.1);
        }

        .icon-small {
            width: 16px;
            height: 16px;
            vertical-align: middle; /* Align icons with text */
        }

        .btn-primary {
            background-color: var(--blue-600);
            color: var(--white);
        }
        .btn-primary:hover {
            background-color: var(--blue-700);
        }

        .btn-secondary {
            background-color: var(--gray-200);
            color: var(--gray-800);
        }
        .btn-secondary:hover {
            background-color: var(--gray-300);
        }
        
        .btn-danger-solid {
            background-color: var(--red-600);
            color: var(--white);
        }
        .btn-danger-solid:hover {
            background-color: var(--red-700);
        }

        /* --- Header & Navigation --- */
        .header {
            background-color: rgba(255, 255, 255, 0.9); /* Slightly more opaque */
            backdrop-filter: blur(12px); /* Stronger blur */
            box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 40;
            transition: box-shadow 0.3s var(--ease-out-quad); /* Smooth shadow transition */
        }
        .header.scrolled { /* Class added by JS on scroll */
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
        }
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .logo {
            font-size: 1.75rem; /* Slightly larger logo */
            font-weight: 700;
            color: var(--gray-900);
            text-decoration: none;
            transition: color 0.3s var(--ease-out-quad);
        }
        .logo span {
            color: var(--blue-600);
        }
        .logo:hover {
            color: var(--blue-700); /* Color change on logo hover */
        }
        .nav-links {
            display: none;
            gap: 2.5rem; /* Increased gap */
        }
        .nav-links a {
            color: var(--gray-600);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s var(--ease-out-quad), transform 0.2s var(--ease-out-quad);
            position: relative; /* For underline effect */
        }
        .nav-links a:hover {
            color: var(--blue-600);
            transform: translateY(-2px);
        }
        .nav-links a::after { /* Animated underline */
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            display: block;
            margin-top: 5px;
            right: 0;
            background: var(--blue-600);
            transition: width 0.3s ease;
            -webkit-transition: width 0.3s ease;
        }
        .nav-links a:hover::after {
            width: 100%;
            left: 0;
            background: var(--blue-600);
        }
        .mobile-nav-btn {
            background-color: var(--blue-600);
            color: var(--white);
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-decoration: none;
            transition: background-color 0.3s var(--ease-out-quad);
        }
        .mobile-nav-btn:hover {
            background-color: var(--blue-700);
        }

        /* --- Sections --- */
        .section {
            padding-top: 6rem; /* More vertical padding */
            padding-bottom: 6rem;
        }
        .section-white {
            background-color: var(--white);
        }
        .hero-gradient {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .section-title {
            font-size: 2.75rem; /* Larger title */
            font-weight: 700;
            color: var(--gray-800);
            text-align: center;
            margin-bottom: 1.5rem; /* Increased margin */
        }
        .section-subtitle {
            font-size: 1.25rem; /* Larger subtitle */
            color: var(--gray-500);
            text-align: center;
            margin-top: 0.5rem;
            margin-bottom: 4rem; /* Increased margin */
            max-width: 48rem; /* Wider subtitle */
            margin-left: auto;
            margin-right: auto;
        }

        /* --- Hero Section --- */
        .hero {
            padding-top: 8rem; /* More padding */
            padding-bottom: 8rem;
            text-align: center;
        }
        .hero-title {
            font-size: 3.5rem; /* Larger hero title */
            font-weight: 800;
            color: var(--gray-800);
            margin-bottom: 1.5rem;
        }
        .hero-subtitle {
            font-size: 1.35rem; /* Larger hero subtitle */
            color: var(--gray-600);
            max-width: 56rem; /* Wider hero subtitle */
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 2.5rem;
        }

        /* --- Features Section --- */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 3rem; /* Increased gap */
        }
        .feature-item {
            text-align: center;
            padding: 2rem; /* More padding */
            background-color: var(--white);
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05), 0 4px 6px -4px rgba(0,0,0,0.05); /* Soft shadow */
            transition: transform 0.3s var(--ease-out-quad), box-shadow 0.3s var(--ease-out-quad);
        }
        .feature-item:hover {
            transform: translateY(-8px); /* Lift on hover */
            box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
        }
        .feature-icon-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 4.5rem; /* Larger icon circle */
            width: 4.5rem;
            border-radius: 9999px;
            background-color: var(--blue-100);
            color: var(--blue-600);
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 1.5rem; /* Increased margin */
        }
        .feature-icon-wrapper i {
            width: 2.5rem; /* Larger icons */
            height: 2.5rem;
        }
        .feature-item h3 {
            font-size: 1.4rem; /* Larger feature title */
            font-weight: 700; /* Bolder */
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }
        .feature-item p {
            color: var(--gray-600);
            font-size: 1.05rem; /* Slightly larger text */
        }

        /* --- Project Cards --- */
        .project-cards-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 2rem;
        }
        .category-card {
            background-color: var(--white);
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05);
            transition: all 0.3s var(--ease-out-quad);
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            text-align: left;
            border: 1px solid var(--gray-200); /* Subtle border */
        }
        .category-card:hover {
            box-shadow: 0 15px 25px -5px rgba(0,0,0,0.1), 0 6px 10px -6px rgba(0,0,0,0.1);
            transform: translateY(-0.75rem); /* More lift */
            border-color: var(--blue-300); /* Highlight border on hover */
        }
        .category-card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.25rem; /* Increased margin */
        }
        .category-card-icon {
            width: 3.5rem; /* Larger icon circle */
            height: 3.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1); /* Small shadow for the icon bg */
        }
        .category-card-icon i {
            width: 2rem; /* Larger icons */
            height: 2rem;
        }
        .category-card h3 {
            font-size: 1.35rem; /* Larger title */
            font-weight: 700;
            color: var(--gray-800);
            margin-left: 1rem;
        }
        .category-card p {
            color: var(--gray-600);
            font-size: 1.05rem;
            margin-bottom: 1.5rem; /* More space */
            flex-grow: 1;
        }
        .category-card-footer {
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid var(--gray-200);
            width: 100%;
        }
        .category-card-footer span {
            font-weight: 600;
            color: var(--blue-600);
            display: flex;
            align-items: center;
            transition: color 0.3s var(--ease-out-quad);
        }
        .category-card:hover .category-card-footer span {
            color: var(--blue-700);
        }
        .category-card-footer i {
            width: 1.25rem;
            height: 1.25rem;
            margin-left: 0.5rem;
            transition: transform 0.3s var(--ease-out-quad);
        }
        .category-card:hover .category-card-footer i {
            transform: translateX(6px); /* More pronounced arrow movement */
        }

        /* --- How It Works Section --- */
        .steps-container {
            position: relative;
            padding-top: 2rem; /* Space for numbers */
            padding-bottom: 2rem;
        }
        .steps-line {
            display: none;
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            border-top: 2px dashed var(--gray-300);
            transform: translateY(-50%);
        }
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 4rem;
            position: relative;
        }
        .step-item {
            text-align: center;
            padding: 1rem;
            background-color: var(--white);
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05);
            position: relative; /* For step number positioning */
        }
        .step-number {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 5.5rem; /* Larger step number circle */
            width: 5.5rem;
            border-radius: 9999px;
            background-color: var(--white);
            border: 3px solid var(--blue-600); /* Solid blue border */
            color: var(--blue-600);
            margin: -3rem auto 1.5rem; /* Pull up to overlap with line */
            font-size: 2rem; /* Larger number */
            font-weight: 700;
            box-shadow: 0 5px 10px rgba(0,0,0,0.1); /* Shadow for numbers */
        }
        .step-item h3 {
            font-size: 1.35rem; /* Larger heading */
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }
        .step-item p {
            color: var(--gray-600);
            font-size: 1.05rem;
        }

        /* --- Contact Section --- */
        .contact-card {
            max-width: 56rem;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.7); /* Slightly more transparent */
            backdrop-filter: blur(8px); /* Added blur for contact card */
            padding: 2.5rem; /* More padding */
            border-radius: 1rem; /* More rounded */
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
            border: 1px solid var(--gray-200); /* Subtle border */
        }
        .contact-details {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            gap: 2.5rem; /* Increased gap */
        }
        .contact-detail-item {
            display: flex;
            align-items: center;
            gap: 1.25rem; /* Increased gap */
        }
        .contact-detail-item i {
            width: 2.25rem; /* Larger icons */
            height: 2.25rem;
            color: var(--blue-600);
        }
        .contact-detail-item h4 {
            font-weight: 700; /* Bolder */
            font-size: 1.25rem; /* Larger text */
            margin: 0;
            color: var(--gray-900);
        }
        .contact-detail-item p, .contact-detail-item a {
            color: var(--gray-600);
            margin: 0;
            text-decoration: none;
            font-size: 1.05rem;
            transition: color 0.3s var(--ease-out-quad);
        }
        .contact-detail-item a:hover {
            text-decoration: underline;
            color: var(--blue-700); /* Darker blue on hover */
        }
        .contact-detail-item a {
            color: var(--blue-600);
        }

        /* --- Footer --- */
        .footer {
            background-color: var(--gray-800);
            color: var(--white);
            padding: 2rem 0; /* More padding */
            margin-top: 3rem; /* Space from section above */
        }
        .footer .container {
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
            text-align: center;
            position: relative;
            display: flex; /* Flex for copyright and admin */
            justify-content: center;
            align-items: center;
        }
        .footer p {
            margin: 0;
            font-size: 0.95rem; /* Slightly larger text */
            color: var(--gray-300); /* Lighter gray */
        }
        #admin-login-btn {
            position: absolute;
            right: 1.5rem; /* Keep it on the right */
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-500); /* Slightly darker for better visibility */
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.3s var(--ease-out-quad), transform 0.2s var(--ease-out-quad);
            padding: 0.5rem; /* Add padding for easier click */
            border-radius: 0.25rem;
        }
        #admin-login-btn:hover {
            color: var(--white);
            transform: translateY(-50%) scale(1.1); /* Pop a bit on hover */
        }
        #admin-login-btn i {
            width: 1.35rem; /* Slightly larger icon */
            height: 1.35rem;
        }


        /* --- Modals --- */
        .modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.7); /* Slightly darker overlay */
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            
        }
        .modal.hidden { /* Use 'visible' instead of removing 'hidden' */
            display: none;
           
        }
        .modal-content {
            background-color: var(--white);
            border-radius: 0.75rem; /* More rounded */
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.35); /* Stronger shadow */
            width: 100%;
            max-height: 95vh; /* Allow some overflow for scrolling */
            display: flex;
            flex-direction: column;
            transform: scale(0.9); /* Start slightly smaller */
            transition: transform 0.3s var(--ease-in-out-quad); /* Smooth scale transition */
        }
        .modal.visible .modal-content { /* Animate content when modal is visible */
            transform: scale(1);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem; /* More padding */
            border-bottom: 1px solid var(--gray-200);
        }
        .modal-header h3 {
            font-size: 1.65rem; /* Larger title */
            font-weight: 600;
            margin: 0;
            color: var(--gray-800);
        }
        .close-modal-btn {
            color: var(--gray-400);
            background: none;
            border: none;
            font-size: 3rem; /* Larger 'x' */
            line-height: 1;
            cursor: pointer;
            transition: color 0.3s var(--ease-out-quad), transform 0.2s var(--ease-out-quad);
            padding: 0.25rem; /* Make clickable area bigger */
        }
        .close-modal-btn:hover {
            color: var(--gray-800);
            transform: rotate(90deg); /* Rotate 'x' on hover */
        }
        .modal-body {
            padding: 1.5rem;
            overflow-y: auto;
            flex-grow: 1; /* Allow content to fill available space */
        }
        .modal-body ol {
            list-style-position: outside; /* Bullet points outside for better readability */
            list-style-type: disc; /* Ensure it's disc */
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 0.75rem 2rem;
            color: var(--gray-700);
            padding-left: 1.25rem; /* More padding for list items */
            margin: 0;
        }
        .modal-body ol li {
            padding-bottom: 0.25rem; /* Small space between list items */
        }

        /* Modal-specific sizing */
        #projects-modal .modal-content { max-width: 68rem; } /* Slightly wider */
        #categorized-projects-modal .modal-content { max-width: 60rem; }
        #login-modal .modal-content { max-width: 26rem; }
        #add-edit-project-modal .modal-content { max-width: 36rem; }
        #manage-projects-modal .modal-content { max-width: 78rem; }
        #manage-categories-modal .modal-content { max-width: 60rem; }
        #manage-boards-modal .modal-content { max-width: 52rem; }
        #delete-confirm-modal .modal-content { max-width: 32rem; }

        /* Categorized Projects Modal Navigation */
        .modal-nav-container {
            display: flex;
            flex-wrap: wrap;
            gap: 1.25rem; /* Increased gap */
            margin-bottom: 2.5rem; /* More space */
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
        }
        .modal-nav-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.6rem 1.25rem; /* Adjusted padding */
            border-radius: 0.5rem;
            font-weight: 500;
            color: var(--gray-700);
            background-color: var(--white);
            border: 2px solid var(--gray-200);
            transition: all 0.2s var(--ease-out-quad);
            cursor: pointer;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05); /* Subtle shadow */
        }
        .modal-nav-btn:hover {
            border-color: var(--blue-500);
            background-color: var(--blue-50);
            color: var(--blue-700);
            transform: translateY(-2px); /* Slight lift */
        }
        .modal-nav-btn.active {
            background-color: var(--blue-600);
            color: var(--white);
            border-color: var(--blue-600);
            box-shadow: 0 2px 5px rgba(0,0,0,0.15); /* More prominent shadow for active */
            transform: translateY(-1px); /* Slight lift for active */
        }
        .modal-nav-btn.active:hover {
            background-color: var(--blue-700);
            border-color: var(--blue-700);
            transform: translateY(-2px); /* Keep hover lift on active */
        }
        .modal-nav-btn i {
            width: 1.1rem; /* Slightly larger icon */
            height: 1.1rem;
            margin-right: 0.6rem;
        }

        .categorized-list-wrapper {
            padding: 1.75rem; /* More padding */
            border-radius: 0.75rem; /* More rounded */
            border-left: 5px solid transparent; /* Thicker border */
            transition: all 0.3s var(--ease-out-quad);
        }
        .categorized-list-wrapper.active {
            background-color: var(--blue-50);
            border-color: var(--blue-500);
            box-shadow: 0 5px 10px rgba(0,0,0,0.08); /* Shadow for active list */
        }
        .categorized-list-wrapper h4 {
            font-size: 1.35rem; /* Larger title */
            font-weight: 700;
            color: var(--blue-800);
            margin-top: 0;
            margin-bottom: 1.25rem; /* More space */
        }
        .categorized-list-wrapper ol {
            list-style-type: disc;
            list-style-position: inside;
            padding-left: 0.75rem;
            line-height: 1.8; /* More space between lines */
        }
        .categorized-list-wrapper ol li {
            font-size: 1.05rem; /* Slightly larger list item text */
            margin-bottom: 0.4rem; /* Small vertical spacing */
        }

        /* --- Admin Panel --- */
        .form-group {
            margin-bottom: 1.25rem; /* More space */
        }
        .form-group label {
            display: block;
            color: var(--gray-700);
            font-weight: 600; /* Bolder label */
            margin-bottom: 0.6rem; /* More space */
            font-size: 0.95rem;
        }
        .form-control {
            width: 100%;
            padding: 0.75rem 1rem; /* More padding */
            border: 1px solid var(--gray-300);
            border-radius: 0.6rem; /* More rounded */
            transition: border-color 0.2s var(--ease-out-quad), box-shadow 0.2s var(--ease-out-quad);
            font-size: 1rem; /* Consistent font size */
            color: var(--gray-800);
            background-color: var(--white);
        }
        .form-control:focus {
            outline: none;
            border-color: var(--blue-500);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.3); /* Stronger focus ring */
        }
        .form-control:disabled {
            background-color: var(--gray-100); /* Lighter disabled state */
            cursor: not-allowed;
        }
        #login-error {
            color: var(--red-600); /* Darker red */
            font-size: 0.9rem;
            margin-top: 0.5rem;
            text-align: center;
            font-weight: 500;
        }
        .admin-options {
            display: flex;
            flex-direction: column;
            gap: 1rem; /* More space */
        }
        .btn-admin, .btn-danger {
            display: flex;
            align-items: center;
            width: 100%;
            text-align: left;
            padding: 0.85rem 1.25rem; /* More padding */
            border-radius: 0.6rem;
            font-weight: 600;
            transition: all 0.2s var(--ease-out-quad);
            border: 1px solid var(--gray-300);
            box-shadow: 0 1px 3px 0 rgba(0,0,0,0.05); /* Subtle shadow */
            background-color: var(--white);
            color: var(--gray-700);
            cursor: pointer;
        }
        .btn-admin:hover {
            background-color: var(--gray-100);
            border-color: var(--gray-400);
            transform: translateY(-2px); /* Lift on hover */
            box-shadow: 0 5px 10px rgba(0,0,0,0.08);
        }
        .btn-admin i, .btn-danger i {
            width: 1.4rem; /* Larger icons */
            height: 1.4rem;
            margin-right: 0.85rem;
        }
        .btn-danger {
            color: var(--red-700);
            background-color: var(--red-50);
            border-color: var(--red-300);
        }
        .btn-danger:hover {
            background-color: var(--red-100);
            border-color: var(--red-400);
        }
        #reset-database-btn {
            margin-top: 1.5rem; /* More space */
        }
        
        /* Management Modals */
        .management-list-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            background-color: var(--white);
            box-shadow: 0 1px 3px rgba(0,0,0,0.08); /* Slightly stronger shadow */
            margin-bottom: 0.6rem; /* More space */
            transition: transform 0.2s var(--ease-out-quad), box-shadow 0.2s var(--ease-out-quad);
        }
        .management-list-item:hover {
            transform: translateX(4px); /* Slide slightly on hover */
            box-shadow: 0 3px 8px rgba(0,0,0,0.12);
        }
        .management-list-item span {
            color: var(--gray-700);
            font-weight: 500;
        }
        .management-list-item .actions { display: flex; align-items: center; gap: 0.5rem; }
        .management-list-item .actions button {
            background: none;
            border: none;
            padding: 0.35rem; /* More clickable area */
            cursor: pointer;
            transition: transform 0.2s var(--ease-out-quad);
            border-radius: 0.25rem; /* Slight roundness */
        }
        .management-list-item .actions button:hover {
            transform: scale(1.1); /* Pop on hover */
            background-color: var(--gray-100);
        }
        .management-list-item .actions .edit-btn { color: var(--blue-600); }
        .management-list-item .actions .edit-btn:hover { color: var(--blue-800); }
        .management-list-item .actions .delete-btn { color: var(--red-600); }
        .management-list-item .actions .delete-btn:hover { color: var(--red-700); }
        
        .management-section h4 {
            font-size: 1.65rem; /* Larger heading */
            font-weight: 700;
            margin-top: 2rem; /* More space */
            margin-bottom: 1rem;
            padding-bottom: 0.75rem; /* More padding */
            border-bottom: 1px solid var(--gray-200);
            color: var(--gray-900);
        }
        .management-section h5 {
            font-size: 1.35rem; /* Larger sub-heading */
            font-weight: 600;
            margin-top: 1.25rem;
            margin-bottom: 0.75rem;
            color: var(--gray-800);
        }

        .delete-confirm-body {
            text-align: center;
        }
        .delete-confirm-body i {
            width: 4.5rem; /* Larger icon */
            height: 4.5rem;
            color: var(--red-500);
            margin: 0 auto 1.5rem; /* More space */
        }
        .delete-confirm-body h3 {
            font-size: 1.75rem; /* Larger title */
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }
        .delete-confirm-body p {
            color: var(--gray-500);
            font-size: 1.05rem;
            margin-bottom: 2rem; /* More space */
        }
        .delete-confirm-actions {
            display: flex;
            justify-content: center;
            gap: 1.25rem; /* More space */
        }

        /* --- Utility Classes --- */
        .hidden {
            display: none !important;
        }
        .w-full {
            width: 100%;
        }
        .mt-6 {
            margin-top: 1.5rem;
        }

        /* --- Responsive Design --- */
        @media (min-width: 768px) {
            .container {
                max-width: 768px;
            }
            .nav-links {
                display: flex;
                align-items: center;
                gap: 2.5rem;
            }
            .mobile-nav-btn-container { /* Hide the mobile button container */
                display: none;
            }
            .hero-title {
                font-size: 4.25rem; /* Even larger on desktop */
            }
            .section-title {
                font-size: 3rem;
            }
            .features-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .project-cards-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .steps-line {
                display: block;
            }
            .steps-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            .contact-details {
                flex-direction: row;
                gap: 2rem; /* Adjusted gap */
            }
            .modal-body ol {
                grid-template-columns: repeat(2, 1fr); /* 2 columns for lists in modals on desktop */
            }
            #projects-modal .modal-body ol {
                grid-template-columns: repeat(3, 1fr); /* 3 columns for mini projects */
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1024px;
            }
            .project-cards-grid {
                grid-template-columns: repeat(3, 1fr); /* 3 cards per row */
            }
            #projects-modal .modal-body ol {
                grid-template-columns: repeat(4, 1fr); /* 4 columns for mini projects */
            }
        }
        @media (min-width: 1280px) {
            .container {
                max-width: 1280px;
            }
            .project-cards-grid {
                grid-template-columns: repeat(4, 1fr); /* 4 cards per row for large screens */
            }
        }
        @media (min-width: 1440px) { /* Even larger screens */
            .container {
                max-width: 1400px;
            }
        }
    </style>
</head>
<body>

    <!-- Header Section -->
    <header class="header">
        <nav class="container navbar">
            <a href="#" class="logo">Project<span>Spark</span></a>
            <div class="nav-links">
                <a href="#features">Why Us</a>
                <a href="#projects">Projects</a>
                <a href="#contact">Contact Me</a>
            </div>
            <div class="mobile-nav-btn-container">
                 <a href="#contact" class="mobile-nav-btn">Contact</a>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Hero Section -->
        <section class="hero-gradient">
            <div class="container hero">
                <h1 class="hero-title">Find Your Perfect Engineering Project</h1>
                <p class="hero-subtitle">
                    From simple mini-projects to advanced IoT systems, get the guidance and resources you need to build, learn, and succeed in your academics.
                </p>
                <a href="#projects" class="btn btn-primary">Explore Project Ideas</a>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="section section-white">
            <div class="container">
                <h2 class="section-title">Why Build With Us?</h2>
                <p class="section-subtitle">We provide more than just a project; we provide a complete learning experience.</p>
                <div class="features-grid">
                    <div class="feature-item">
                        <div class="feature-icon-wrapper"><i data-feather="book-open" style="width: 2rem; height: 2rem;"></i></div>
                        <h3>Complete Documentation</h3>
                        <p>Receive detailed reports, circuit diagrams, and code explanations to understand every aspect of your project.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon-wrapper"><i data-feather="award" style="width: 2rem; height: 2rem;"></i></div>
                        <h3>Quality Components</h3>
                        <p>We use reliable and high-quality components to ensure your project works flawlessly.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon-wrapper"><i data-feather="users" style="width: 2rem; height: 2rem;"></i></div>
                        <h3>One-on-One Mentorship</h3>
                        <p>Get personalized guidance and support throughout your project-building journey.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="section">
            <div class="container">
                <h2 class="section-title">Project Categories</h2>
                <p class="section-subtitle">Select a category to explore a curated list of project ideas suitable for all skill levels.</p>
                <div id="project-cards-container" class="project-cards-grid">
                    <!-- Project cards will be dynamically inserted here -->
                </div>
            </div>
        </section>
        
        <!-- How It Works Section -->
        <section id="how-it-works" class="section section-white">
            <div class="container">
                <h2 class="section-title">Get Your Project in 3 Simple Steps</h2>
                <p class="section-subtitle">A straightforward process from idea to implementation.</p>
                <div class="steps-container">
                    <div class="steps-line"></div>
                    <div class="steps-grid">
                        <div class="step-item">
                            <div class="step-number">1</div>
                            <h3>Browse & Select</h3>
                            <p>Explore our extensive list of projects and find the one that excites you the most.</p>
                        </div>
                        <div class="step-item">
                            <div class="step-number">2</div>
                            <h3>Get In Touch</h3>
                            <p>Contact us with your chosen project idea or a custom requirement for a detailed discussion.</p>
                        </div>
                        <div class="step-item">
                            <div class="step-number">3</div>
                            <h3>Build & Learn</h3>
                            <p>Receive your project kit, documentation, and expert guidance to start building and learning.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Me Section -->
        <section id="contact" class="section hero-gradient">
            <div class="container">
                <h2 class="section-title">Have a Project in Mind?</h2>
                <p class="section-subtitle">Let's turn your idea into reality. Reach out today for a free consultation.</p>
                 <div class="contact-card">
                     <div class="contact-details">
                         <div class="contact-detail-item"><i data-feather="user"></i><div><h4>Shubham Sutar</h4><p>Project Mentor</p></div></div>
                         <div class="contact-detail-item"><i data-feather="mail"></i><div><h4>Email</h4><a href="mailto:shubhamsutar789@gmail.com">shubhamsutar789@gmail.com</a></div></div>
                         <div class="contact-detail-item">
                            <i data-feather="phone"></i>
                            <div>
                                <h4>Phone / WhatsApp</h4>
                                <p>
                                    <a href="https://wa.me/917410555337?text=Hello%20Project%20Spark%2C%20I%20am%20interested%20in%20your%20engineering%20projects." target="_blank" rel="noopener noreferrer">
                                        +91 7410555337
                                    </a>
                                </p>
                            </div>
                        </div>
                     </div>
                 </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 ProjectSpark. All rights reserved. Empowering student innovation.</p>
            <button id="admin-login-btn">
                <i data-feather="lock" style="width: 1.25rem; height: 1.25rem;"></i>
            </button>
        </div>
    </footer>

    <!-- MODALS SECTION -->
    <div id="projects-modal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3>Mini Project Ideas</h3><button class="close-modal-btn">&times;</button></div><div class="modal-body"><ol id="mini-projects-list"></ol></div></div></div>
    <div id="categorized-projects-modal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3 id="categorized-modal-title">Project Ideas</h3><button class="close-modal-btn">&times;</button></div><div class="modal-body" id="categorized-project-content"></div></div></div>
    
    <!-- Admin Login Modal -->
    <div id="login-modal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3>Admin Panel</h3><button class="close-modal-btn">&times;</button></div><div id="login-view" class="modal-body"><form id="login-form"><div class="form-group"><label for="password">Password</label><input type="password" id="password" class="form-control"><p id="login-error" class="hidden">Incorrect password.</p></div><button type="submit" class="btn btn-primary w-full">Login</button></form></div><div id="admin-options-view" class="modal-body hidden"><div class="admin-options"><button id="open-add-project-btn" class="btn-admin"><i data-feather="plus-circle"></i>Add New Project</button><button id="open-manage-projects-btn" class="btn-admin"><i data-feather="edit"></i>Manage Projects</button><button id="open-manage-categories-btn" class="btn-admin"><i data-feather="tag"></i>Manage Categories</button><button id="open-manage-boards-btn" class="btn-admin"><i data-feather="server"></i>Manage Boards</button><button id="reset-database-btn" class="btn-danger"><i data-feather="trash-2"></i>Reset Database</button></div></div></div></div>

    <!-- Add/Edit Project Modal -->
    <div id="add-edit-project-modal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3 id="add-edit-modal-title">Add New Project</h3><button class="close-modal-btn">&times;</button></div><div class="modal-body"><form id="add-edit-project-form"><input type="hidden" id="project-id"><div class="form-group"><label for="project-title">Project Title</label><input type="text" id="project-title" class="form-control" required></div><div class="form-group"><label for="project-board">Board</label><select id="project-board" class="form-control"></select></div><div class="form-group"><label for="project-category">Category</label><select id="project-category" class="form-control" required></select></div><button type="submit" id="save-project-btn" class="btn btn-primary w-full mt-6">Save Project</button></form></div></div></div>

    <!-- Manage Projects Modal -->
    <div id="manage-projects-modal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3>Project Management</h3><button class="close-modal-btn">&times;</button></div><div class="modal-body" id="management-content"></div></div></div>
    
    <!-- Manage Categories Modal -->
    <div id="manage-categories-modal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3>Category Management</h3><button class="close-modal-btn">&times;</button></div><div class="modal-body" id="category-management-content"></div></div></div>

    <!-- Manage Boards Modal -->
    <div id="manage-boards-modal" class="modal hidden"><div class="modal-content"><div class="modal-header"><h3>Board Management</h3><button class="close-modal-btn">&times;</button></div><div class="modal-body" id="board-management-content"></div></div></div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-confirm-modal" class="modal hidden"><div class="modal-content"><div class="modal-body delete-confirm-body"><i data-feather="alert-triangle"></i><h3>Are you sure?</h3><p id="delete-confirm-text"></p><div class="delete-confirm-actions"><button id="cancel-delete-btn" class="btn btn-secondary">Cancel</button><button id="confirm-delete-btn" class="btn btn-danger-solid">Delete</button></div></div></div></div>

    <!-- Firebase SDK -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, updateDoc, deleteDoc, getDocs, writeBatch, arrayUnion, arrayRemove, setDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Your web app's Firebase configuration ---
        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config)
            : {
                apiKey: "AIzaSyBLASOGSVG3QvAr8R4mhDlJH1iPsE6ojnE",
                authDomain: "projectspark-website.firebaseapp.com",
                projectId: "projectspark-website",
                storageBucket: "projectspark-website.appspot.com",
                messagingSenderId: "114149323229",
                appId: "1:114149323229:web:186ffc8cd472ca9c3e8634",
                measurementId: "G-J4YJXBWC06"
              };
        
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- App State ---
        let allProjects = {};
        let firestoreProjects = [];
        let allCategories = {};
        let allBoards = [];

        // --- BASE PROJECT DATA (for one-time seeding) ---
        const baseData = {
            boards: [
                { id: 'mini', name: 'Mini Projects', shortName: 'Mini', description: 'Perfect for beginners. Simple circuits and fundamental concepts.', color: 'E9F2FF/3B82F6', icon: 'cpu' },
                { id: 'arduino', name: 'Arduino', shortName: 'Arduino', description: 'Versatile projects covering robotics, sensors, automation, and more.', color: 'E0F2F1/0D9488', icon: 'radio' },
                { id: 'esp', name: 'ESP32 / ESP8266', shortName: 'ESP32', description: 'Advanced IoT, Wi-Fi, and Bluetooth-enabled projects for the modern world.', color: 'ECFDF5/10B981', icon: 'wifi' },
                { id: 'rpi', name: 'Raspberry Pi', shortName: 'RPi', description: 'Powerful projects involving computer vision, networking, and emulation.', color: 'FEF2F2/DC2626', icon: 'server' }
            ],
            categories: {
                arduino: [
                    { name: "Sensor Based", icon: "activity" },
                    { name: "Bluetooth (HC-05)", icon: "bluetooth" },
                    { name: "GSM & GPS", icon: "radio" },
                    { name: "Wireless (RF/nRF/LoRa)", icon: "wifi-off" },
                    { name: "Robotics & Automation", icon: "cpu" },
                    { name: "Displays & Interfaces", icon: "monitor" }
                ],
                esp: [
                    { name: "WiFi & IoT", icon: "wifi" },
                    { name: "Bluetooth & BLE", icon: "bluetooth" },
                    { name: "ESP-NOW & LoRa", icon: "zap" },
                    { name: "Camera (ESP32-CAM)", icon: "camera" },
                    { name: "Automation & Control", icon: "sliders" }
                ],
                rpi: [
                    { name: "Computer Vision & AI", icon: "eye" },
                    { name: "Automation & Robotics", icon: "cpu" },
                    { name: "Networking & Security", icon: "shield" }
                ]
            },
            projects: {
                mini: ["LED Chaser/Sequencer", "Simple Touch Switch", "Rain Alarm", "Darkness Detector (LDR)", "Fire Alarm (Thermistor)","5V Regulated Power Supply", "Clap Switch Circuit", "Police Siren (555 Timer)", "IR Remote Tester", "Mobile Phone Detector","Automatic Washroom Light", "Adjustable Timer (555)", "Simple Inverter Circuit", "FM Transmitter", "Audio Amplifier (LM386)","Crystal Tester", "Continuity Tester", "Logic Probe", "Water Pump Controller", "Battery Charger Circuit","Light Dimmer Circuit", "Flashing LED (Astable)", "Music Reactive LEDs", "Soil Moisture Sensor", "Automatic Street Light","IR Obstacle Detector", "DC Motor Speed Controller", "Phone Line Busy Indicator", "Simple Emergency Light", "Digital Object Counter","Temperature Controlled Fan", "Sound Generator (555)", "Over/Under Voltage Protection", "Simple Lie Detector", "Electronic Dice","Touchless Doorbell", "Anti-Theft Bag Alarm", "AC Mains Detector", "Simple Metal Detector", "LED VU Meter","Automatic Hand Sanitizer", "Clap-operated Fan Switch", "Short Circuit Indicator", "Phone Call Activated Relay", "Electronic Piano","Water Overflow Alarm", "Heat Sensor Alarm", "Car Reverse Parking Sensor", "Digital Thermometer (LM35)", "Automatic Plant Watering","Mosquito Repellent Circuit", "Light Activated Alarm", "Simple Intercom System", "TV Remote Jammer", "Zener Diode Tester","Capacitor Tester", "Inductor Tester", "AC Fan Speed Regulator", "Automatic Night Lamp", "Electronic Voting Machine","Digital Clock (ICs)", "Frequency Counter", "Gas Leakage Detector", "Smoke Detector", "Heartbeat Sensor (IR)","Digital Stop Watch", "Ultrasonic RADAR System", "Voice Recorder (ISD1820)", "Automatic Railway Gate", "Solar Powered LED Lamp","Line Follower (Analog)", "Obstacle Avoider (Analog)", "Mobile Signal Jammer", "Cell Phone Battery Charger", "Digital Voltmeter","Digital Ammeter", "Simple UPS System", "Electronic Code Lock", "Knock-based Door Lock", "Laser Security System","Automatic School Bell", "DC-DC Boost Converter", "Traffic Light Controller", "Dry Run Pump Protector", "Digital Capacitance Meter","Electronic Fuse", "Touch Dimmer Switch", "Room Heater Controller", "Simple Function Generator", "Solar Bug Zapper","Electronic Pest Repellent", "Reverse Polarity Protection", "Sound Operated Switch", "Highway Speed Checker", "Automatic Visitor Counter","Bike Turning Signal", "LED Matrix Display (8x8)", "Simple Radio Receiver", "Infrared Data Transmission", "Simple Power Bank","Door Open Alarm", "Variable Power Supply", "Audio Mixer", "Guitar Fuzz Pedal", "Electronic Metronome","Battery Level Indicator", "Mains Voltage Monitor", "Simple Logic Gate Tester", "Decade Counter Display", "Quiz Buzzer System","Random Number Generator", "LED Stroboscope", "Three-Phase Power Indicator", "Water Salinity Tester", "Air Flow Detector","Simple EMF Detector", "Fridge Door Alarm", "Static Electricity Detector", "Sound Amplifier using Transistors", "Simple Burglar Alarm","Object Counter with IR Sensor", "Remote Control Tester", "Automatic Fan Controller", "LED-based Thermometer", "Simple Solar Tracker","Electronic Candle", "Infrared Proximity Sensor", "Simple Tachometer", "Delay Timer using 555", "Touch-Free Switch","AC Power Control with TRIAC", "Simple Geiger Counter", "Soil pH Meter (Analog)", "Wind Speed Indicator", "Magnetic Field Detector"],
                arduino: {
                    "Sensor Based": ["Weather Station with SD Card Logging", "Heart Rate and SPO2 Monitor (MAX30100)", "Air Quality Monitoring Station", "Ultrasonic Distance Measurement with Logging", "IMU-based Human Activity Tracker", "Lie Detector (Polygraph) using Galvanic Skin Response", "Digital Spirit Level and Angle Gauge", "Soil Moisture based Irrigation System", "PIR based Security System", "Gas Leakage Detector with Alarm"],
                    "Bluetooth (HC-05)": ["Bluetooth Controlled Robotic Car", "Home Automation via Bluetooth App", "Bluetooth based Chat Application", "Controlling LED Brightness via Bluetooth", "Bluetooth Controlled Robotic Arm", "Secure Door Lock with Bluetooth"],
                    "GSM & GPS": ["GSM-based Remote Device Control and Monitoring", "Vehicle Tracking System using GPS and GSM", "Women Safety Device with GPS Location and SMS Alerts", "GSM based Home Security Alarm", "GPS Data Logger for Tracking Routes"],
                    "Wireless (RF/nRF/LoRa)": ["Home Automation using nRF24L01 Modules", "LoRa based Long-Range Chat Device", "RC Car control using nRF24L01", "Decoding and Cloning 433MHz RF Remote Controls", "Wireless Weather Station Data Receiver"],
                    "Robotics & Automation": ["Drawing Robot / CNC Plotter", "Self-Balancing Robot using MPU-6050", "Automated Robotic Arm for Sorting Objects by Color", "PID Temperature Controller for an Oven", "Conveyor Belt System for Object Sorting", "Solar Panel Tracker for Maximum Efficiency"],
                    "Displays & Interfaces": ["Persistence of Vision (POV) Display", "8x8x8 LED Cube with Animations", "Arduino-based Retro Gaming Console", "TFT Touchscreen Control Panel", "Biometric Attendance System using Fingerprint Sensor", "Digital Synthesizer/Music Instrument with MIDI"]
                },
                esp: {
                    "WiFi & IoT": ["IoT Weather Station with Cloud Data Logging", "Centralized Web-Based Control Panel for Home Appliances", "Smart Energy Meter with Real-time Web Monitoring", "IoT Weight scale with data tracking app", "Internet Clock synchronized with NTP servers", "IoT based Air Quality Monitor"],
                    "Bluetooth & BLE": ["Bluetooth Mesh-based Lighting Control System", "BLE Beacons for Indoor Proximity Detection", "Smart Lock controlled via Bluetooth Low Energy", "BLE Heart Rate Monitor", "Controlling Robots using BLE from a smartphone"],
                    "ESP-NOW & LoRa": ["Swarm Robotics Demonstration with Multiple ESP-Now Bots", "Long-range sensor data transmission using ESP-NOW", "LoRa-based remote weather station network", "ESP-NOW based multi-robot communication system", "Low-power remote control using ESP-NOW"],
                    "Camera (ESP32-CAM)": ["WiFi Controlled Surveillance Robot with Live Video Streaming", "Face Recognition Door Lock System", "Automated Plant Disease Detection with Image Capture", "Tamper Alert System with Camera Snapshot", "QR Code Scanner and Decoder"],
                    "Automation & Control": ["Voice Controlled Home Automation using Google Assistant/Alexa", "Smart Garage Door Opener with Mobile App", "Automated Greenhouse Environment Controller", "Smart Pet Feeder with Schedule and Remote Feeding", "Gesture Controlled Home Automation using APDS-9960"]
                },
                 rpi: {
                    "Computer Vision & AI": ["Object Detection and Recognition (e.g., YOLO)", "Face Recognition and Tracking System", "License Plate Recognition System", "Automated Plant Disease Detection", "Hand Gesture Controlled Interface", "Lane Detection for Autonomous Vehicles", "Document Scanner and OCR"],
                    "Automation & Robotics": ["Home Automation Hub with Web Interface", "Voice Controlled Smart Mirror", "Internet-Connected Weather Station", "Automated Pet Feeder with Camera", "Robotic Arm with Web-based Controls", "Pi-powered Drone/Quadcopter", "Network Attached Storage (NAS) Server"],
                    "Networking & Security": ["Network-Wide Ad Blocker (Pi-hole)", "Home VPN Server (OpenVPN/WireGuard)", "Wireless Intrusion Detection System (WIDS)", "Tor Router for Anonymous Browsing", "Web Server for Hosting a Personal Website", "Private Cloud Storage with Nextcloud"],
                }
            }
        };

        // --- UI POPULATION FUNCTIONS ---
        function populateList(containerId, data) {
            const container = document.getElementById(containerId);
            if (container) {
                container.innerHTML = ''; 
                data.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    container.appendChild(li);
                });
            }
        }
        
        function populateCategorizedListWithButtons(containerId, data, prefix) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = ''; 

            const instruction = document.createElement('p');
            instruction.style.color = 'var(--gray-500)';
            instruction.style.marginBottom = '1.5rem';
            instruction.textContent = "Select a technology to see related project ideas:";
            
            container.appendChild(instruction);
            
            const buttonContainer = document.createElement('div');
            buttonContainer.className = "modal-nav-container";
            
            const listContainer = document.createElement('div');
            
            let isFirst = true;
            const categoriesForBoard = allCategories[prefix] || [];
            
            categoriesForBoard.forEach((categoryObj, index) => {
                const categoryId = `${prefix}-cat-${index}`;
                
                const button = document.createElement('button');
                button.className = 'modal-nav-btn';
                button.innerHTML = `<i data-feather="${categoryObj.icon || 'box'}" class="icon-small"></i>&nbsp<span>${categoryObj.name}</span>`;
                
                if (isFirst) button.classList.add('active');
                button.setAttribute('data-target', categoryId);
                buttonContainer.appendChild(button);

                const listWrapper = document.createElement('div');
                listWrapper.id = categoryId;
                listWrapper.className = 'categorized-list-wrapper';
                if (!isFirst) {
                    listWrapper.classList.add('hidden');
                } else {
                    listWrapper.classList.add('active');
                }
                
                const listTitle = document.createElement('h4');
                listTitle.textContent = categoryObj.name;
                listWrapper.appendChild(listTitle);

                const list = document.createElement('ol');
                (data[categoryObj.name] || []).forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    list.appendChild(li);
                });
                listWrapper.appendChild(list);
                listContainer.appendChild(listWrapper);
                isFirst = false;
            });

            container.appendChild(buttonContainer);
            container.appendChild(listContainer);
            feather.replace(); 

            buttonContainer.addEventListener('click', (e) => {
                const clickedButton = e.target.closest('button');
                if (clickedButton) {
                    buttonContainer.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
                    clickedButton.classList.add('active');
                    const targetId = clickedButton.getAttribute('data-target');
                    listContainer.querySelectorAll('.categorized-list-wrapper').forEach(list => {
                        const isActive = list.id === targetId;
                        list.classList.toggle('hidden', !isActive);
                        list.classList.toggle('active', isActive);
                    });
                }
            });
        }

        function renderAllLists() {
            populateList('mini-projects-list', allProjects.mini || []);
        }

        function renderProjectCategoryCards() {
            const container = document.getElementById('project-cards-container');
            container.innerHTML = '';
            
            allBoards.sort((a, b) => (a.id === 'mini') ? -1 : 1).forEach(board => {
                 const card = document.createElement('div');
                 card.className = 'category-card';
                 card.dataset.boardId = board.id;
                 card.innerHTML = `
                    <div class="category-card-header">
                        <div class="category-card-icon" style="background-color:#${board.color.split('/')[0]}; color:#${board.color.split('/')[1]}">
                            <i data-feather="${board.icon || 'cpu'}"></i>
                        </div>
                        <h3>${board.name}</h3>
                    </div>
                    <p>${board.description}</p>
                    <div class="category-card-footer">
                        <span>
                            View Projects <i data-feather="arrow-right"></i>
                        </span>
                    </div>`;
                container.appendChild(card);
            });
            feather.replace();
        }

        // --- MODAL HANDLING LOGIC ---
        function setupModalHandlers() {
            document.getElementById('project-cards-container').addEventListener('click', (e) => {
                const card = e.target.closest('.category-card');
                if (!card) return;

                const boardId = card.dataset.boardId;
                if (boardId === 'mini') {
                    openModal('projects-modal');
                } else if (boardId) {
                    const board = allBoards.find(b => b.id === boardId);
                    if (board) {
                        document.getElementById('categorized-modal-title').textContent = `${board.name} Project Ideas`;
                        populateCategorizedListWithButtons('categorized-project-content', allProjects[board.id] || {}, board.id);
                        openModal('categorized-projects-modal');
                    }
                }
            });

            document.querySelectorAll('.close-modal-btn').forEach(btn => {
                btn.addEventListener('click', () => closeModal(btn.closest('.modal')));
            });

            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', e => {
                    if (e.target === modal) closeModal(modal);
                });
            });

             document.getElementById('admin-login-btn').addEventListener('click', () => openModal('login-modal'));
        }

        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('hidden');
            }
        }

        function closeModal(modal) {
            if (modal) {
                modal.classList.add('hidden');
            }
        }
        
        // --- ADMIN & DATA HANDLING ---
        const loginForm = document.getElementById('login-form');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');
        const addEditProjectForm = document.getElementById('add-edit-project-form');
        const projectBoardSelect = document.getElementById('project-board');
        const projectCategorySelect = document.getElementById('project-category');
        const projectIdInput = document.getElementById('project-id');
        const addEditModalTitle = document.getElementById('add-edit-modal-title');
        
        function updateBoardDropdowns() {
            projectBoardSelect.innerHTML = '';
            allBoards.forEach(board => projectBoardSelect.add(new Option(board.name, board.id)));
        }

        function updateCategoryDropdown() {
            const selectedBoard = projectBoardSelect.value;
            projectCategorySelect.innerHTML = ''; // Clear options
            if (selectedBoard === 'mini') {
                projectCategorySelect.disabled = true;
                projectCategorySelect.add(new Option("N/A for Mini Projects", ""));
            } else {
                projectCategorySelect.disabled = false;
                const categories = allCategories[selectedBoard] || [];
                categories.forEach(cat => projectCategorySelect.add(new Option(cat.name, cat.name)));
            }
        }
        
        function populateManagementConsole() {
            const container = document.getElementById('management-content');
            container.innerHTML = '';

            const groupedProjects = {};
            firestoreProjects.forEach(p => {
                if (!groupedProjects[p.board]) groupedProjects[p.board] = {};
                if (p.board === 'mini') {
                    if (!groupedProjects.mini.items) groupedProjects.mini.items = [];
                    groupedProjects.mini.items.push(p);
                } else {
                    if (!groupedProjects[p.board][p.category]) groupedProjects[p.board][p.category] = [];
                    groupedProjects[p.board][p.category].push(p);
                }
            });
            
            allBoards.forEach(board => {
                const boardId = board.id;
                const section = document.createElement('div');
                section.className = 'management-section';
                section.innerHTML = `<h4>${board.name} Projects</h4>`;

                if(boardId === 'mini') {
                    (groupedProjects.mini?.items || []).forEach(proj => section.appendChild(createManageListItem(proj.title, proj.id)));
                } else {
                     Object.keys(groupedProjects[boardId] || {}).sort().forEach(category => {
                        const categoryTitle = document.createElement('h5');
                        categoryTitle.textContent = category;
                        section.appendChild(categoryTitle);
                        groupedProjects[boardId][category].forEach(proj => section.appendChild(createManageListItem(proj.title, proj.id)));
                    });
                }
                container.appendChild(section);
            });
            feather.replace();
        }

        function createManageListItem(title, id) {
            const item = document.createElement('div');
            item.className = 'management-list-item';
            item.innerHTML = `<span>${title}</span>
                <div class="actions">
                    <button class="edit-btn" data-id="${id}"><i data-feather="edit-2"></i></button>
                    <button class="delete-btn" data-id="${id}"><i data-feather="trash-2"></i></button>
                </div>`;
            return item;
        }

        function populateCategoryManagementConsole() {
            const container = document.getElementById('category-management-content');
            container.innerHTML = '';
            
            allBoards.filter(b => b.id !== 'mini').forEach(board => {
                const section = document.createElement('div');
                section.className = 'management-section';
                section.innerHTML = `<h4>${board.name} Categories</h4>`;

                const list = document.createElement('div');
                (allCategories[board.id] || []).forEach(category => {
                    const item = document.createElement('div');
                    item.className = 'management-list-item';
                    item.innerHTML = `
                        <span style="display: flex; align-items: center; gap: 0.75rem;"><i data-feather="${category.icon || 'box'}" style="color: var(--gray-500);"></i>${category.name}</span>
                        <div class="actions">
                            <button class="delete-btn delete-category-btn" data-board="${board.id}" data-category-name="${category.name}"><i data-feather="trash-2"></i></button>
                        </div>`;
                    list.appendChild(item);
                });
                section.appendChild(list);

                const addForm = document.createElement('form');
                addForm.className = 'mt-6';
                addForm.style.display = 'flex';
                addForm.style.gap = '0.5rem';
                addForm.innerHTML = `
                    <input type="text" placeholder="New Category Name" class="new-cat-name form-control" style="flex-grow: 1;" required>
                    <input type="text" placeholder="Icon Name" class="new-cat-icon form-control" style="width: 8rem;" required>
                    <button type="submit" class="btn" style="background-color: var(--green-600); color: var(--white); padding: 0.5rem;"><i data-feather="plus"></i></button>
                `;
                addForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const nameInput = e.target.querySelector('.new-cat-name');
                    const iconInput = e.target.querySelector('.new-cat-icon');
                    const newCategory = { name: nameInput.value.trim(), icon: iconInput.value.trim() };
                    
                    if (newCategory.name && newCategory.icon) {
                        try {
                            const catDocRef = doc(db, "artifacts", appId, "public", "data", "categories", board.id);
                            await updateDoc(catDocRef, { list: arrayUnion(newCategory) });
                            alert('Category added!');
                            nameInput.value = '';
                            iconInput.value = '';
                        } catch (err) {
                             await setDoc(catDocRef, { list: [newCategory] });
                        }
                    }
                });
                section.appendChild(addForm);
                container.appendChild(section);
            });
            feather.replace();
        }

        function populateBoardManagementConsole() {
            const container = document.getElementById('board-management-content');
            container.innerHTML = '';
            const list = document.createElement('div');
            list.style.display = 'flex';
            list.style.flexDirection = 'column';
            list.style.gap = '0.5rem';
            allBoards.forEach(board => {
                const item = document.createElement('div');
                item.className = 'management-list-item';
                item.innerHTML = `<span>${board.name}</span>`;
                if (board.id !== 'mini') {
                   item.innerHTML += `<div class="actions"><button class="delete-btn delete-board-btn" data-board-id="${board.id}"><i data-feather="trash-2"></i></button></div>`;
                }
                list.appendChild(item);
            });
            container.appendChild(list);

            const addForm = document.createElement('form');
            addForm.className = 'mt-6';
            addForm.style.paddingTop = '1.5rem';
            addForm.style.borderTop = '1px solid var(--gray-200)';
            addForm.style.display = 'grid';
            addForm.style.gridTemplateColumns = '1fr 1fr';
            addForm.style.gap = '1rem';
            
            addForm.innerHTML = `
                <div class="form-group" style="grid-column: 1 / -1;"><label>Board Name</label><input type="text" id="new-board-name" placeholder="e.g. STM32" class="form-control" required></div>
                <div class="form-group" style="grid-column: 1 / -1;"><label>Description</label><input type="text" id="new-board-desc" placeholder="A short description" class="form-control" required></div>
                <div class="form-group"><label>Short Name</label><input type="text" id="new-board-short" placeholder="e.g. STM32" class="form-control" required></div>
                <div class="form-group"><label>Icon Name (<a href="https://feathericons.com/" target="_blank" style="color: var(--blue-600); text-decoration: underline;">feathericons.com</a>)</label><input type="text" id="new-board-icon" placeholder="e.g. cpu" class="form-control" required></div>
                <button type="submit" class="btn" style="grid-column: 1 / -1; background-color: var(--green-600); color: var(--white); display: flex; align-items: center; justify-content: center; gap: 0.5rem; height: 2.5rem;"><i data-feather="plus"></i>Add Board</button>
            `;
            addForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('new-board-name').value.trim();
                const id = name.toLowerCase().replace(/\s+/g, '-');
                const description = document.getElementById('new-board-desc').value.trim();
                const shortName = document.getElementById('new-board-short').value.trim();
                const icon = document.getElementById('new-board-icon').value.trim();

                if (name && id && description && shortName && icon && !allBoards.find(b => b.id === id)) {
                    try {
                        const boardDocRef = doc(db, "artifacts", appId, "public", "data", "boards", id);
                        await setDoc(boardDocRef, { id, name, description, shortName, icon, color: 'E2E8F0/475569' });

                        const catDocRef = doc(db, "artifacts", appId, "public", "data", "categories", id);
                        await setDoc(catDocRef, { list: [] });

                        alert('Board added!');
                        addForm.reset();
                    } catch (err) {
                        console.error("Error adding board:", err);
                        alert("Failed to add board.");
                    }
                } else if (allBoards.find(b => b.id === id)) {
                    alert('A board with this name already exists.');
                }
            });
            container.appendChild(addForm);
            feather.replace();
        }

        function setupAdminFeatures() {
            const ADMIN_PASSWORD = "admin123";
            const deleteConfirmModal = document.getElementById('delete-confirm-modal');
            const confirmDeleteBtn = document.getElementById('confirm-delete-btn');
            const cancelDeleteBtn = document.getElementById('cancel-delete-btn');
            const deleteConfirmText = document.getElementById('delete-confirm-text');

            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                if (passwordInput.value === ADMIN_PASSWORD) {
                    document.getElementById('login-view').classList.add('hidden');
                    document.getElementById('admin-options-view').classList.remove('hidden');
                    passwordInput.value = '';
                    loginError.classList.add('hidden');
                } else {
                    loginError.classList.remove('hidden');
                }
            });
            
            document.getElementById('open-add-project-btn').addEventListener('click', () => {
                addEditProjectForm.reset();
                projectIdInput.value = '';
                addEditModalTitle.textContent = 'Add New Project';
                updateBoardDropdowns();
                updateCategoryDropdown();
                openModal('add-edit-project-modal');
            });

            document.getElementById('open-manage-projects-btn').addEventListener('click', () => {
                populateManagementConsole();
                openModal('manage-projects-modal');
            });

            document.getElementById('open-manage-categories-btn').addEventListener('click', () => {
                populateCategoryManagementConsole();
                openModal('manage-categories-modal');
            });

            document.getElementById('open-manage-boards-btn').addEventListener('click', () => {
                populateBoardManagementConsole();
                openModal('manage-boards-modal');
            });

            document.getElementById('reset-database-btn').addEventListener('click', () => {
                deleteConfirmText.textContent = "This will delete ALL current data and restore the original template. Are you sure?";
                confirmDeleteBtn.dataset.type = 'database-reset';
                openModal('delete-confirm-modal');
            });

            projectBoardSelect.addEventListener('change', updateCategoryDropdown);

            addEditProjectForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const title = document.getElementById('project-title').value;
                const board = projectBoardSelect.value;
                const category = projectCategorySelect.value;
                const id = projectIdInput.value;

                if (!title || !board || (board !== 'mini' && !category)) {
                    alert("Please fill all fields.");
                    return;
                }

                const projectData = { title, board, category };
                
                try {
                    if (id) {
                        const projectRef = doc(db, "artifacts", appId, "public", "data", "projects", id);
                        await updateDoc(projectRef, projectData);
                        alert('Project updated successfully!');
                    } else {
                        await addDoc(collection(db, "artifacts", appId, "public", "data", "projects"), projectData);
                        alert('Project added successfully!');
                    }
                    addEditProjectForm.reset();
                    closeModal(document.getElementById('add-edit-project-modal'));
                } catch (error) {
                    console.error("Error saving document: ", error);
                    alert('Error saving project. See console for details.');
                }
            });

            document.getElementById('management-content').addEventListener('click', (e) => {
                const editBtn = e.target.closest('.edit-btn');
                const deleteBtn = e.target.closest('.delete-btn');

                if (editBtn) {
                    const id = editBtn.dataset.id;
                    const projectToEdit = firestoreProjects.find(p => p.id === id);
                    if (projectToEdit) {
                        addEditProjectForm.reset();
                        projectIdInput.value = id;
                        document.getElementById('project-title').value = projectToEdit.title;
                        updateBoardDropdowns();
                        document.getElementById('project-board').value = projectToEdit.board;
                        updateCategoryDropdown();
                        document.getElementById('project-category').value = projectToEdit.category;
                        addEditModalTitle.textContent = 'Edit Project';
                        openModal('add-edit-project-modal');
                    }
                }

                if (deleteBtn) {
                    const id = deleteBtn.dataset.id;
                    deleteConfirmText.textContent = "Do you really want to delete this project? This process cannot be undone.";
                    confirmDeleteBtn.dataset.id = id;
                    confirmDeleteBtn.dataset.type = 'project';
                    openModal('delete-confirm-modal');
                }
            });

            document.getElementById('category-management-content').addEventListener('click', (e) => {
                const deleteBtn = e.target.closest('.delete-category-btn');
                if (deleteBtn) {
                    const { board, categoryName } = deleteBtn.dataset;
                    deleteConfirmText.textContent = `Are you sure you want to delete the '${categoryName}' category? This will not delete the projects within it, but they will become uncategorized.`;
                    confirmDeleteBtn.dataset.board = board;
                    confirmDeleteBtn.dataset.categoryName = categoryName;
                    confirmDeleteBtn.dataset.type = 'category';
                    openModal('delete-confirm-modal');
                }
            });

            document.getElementById('board-management-content').addEventListener('click', (e) => {
                const deleteBtn = e.target.closest('.delete-board-btn');
                if (deleteBtn) {
                    const boardId = deleteBtn.dataset.boardId;
                    const projectsOnBoard = firestoreProjects.some(p => p.board === boardId);
                    if (projectsOnBoard) {
                        alert(`Cannot delete '${boardId}' because it still has projects associated with it. Please delete or re-assign those projects first.`);
                        return;
                    }
                    deleteConfirmText.textContent = `Are you sure you want to delete the '${boardId}' board? This will also delete all its categories.`;
                    confirmDeleteBtn.dataset.boardId = boardId;
                    confirmDeleteBtn.dataset.type = 'board';
                    openModal('delete-confirm-modal');
                }
            });

            cancelDeleteBtn.addEventListener('click', () => {
                closeModal(deleteConfirmModal);
            });

            confirmDeleteBtn.addEventListener('click', async () => {
                const { id, type, board, categoryName, boardId } = confirmDeleteBtn.dataset;
                
                try {
                    if (type === 'project' && id) {
                        await deleteDoc(doc(db, "artifacts", appId, "public", "data", "projects", id));
                        alert('Project deleted successfully!');
                    } else if (type === 'category' && board && categoryName) {
                        const catDocRef = doc(db, "artifacts", appId, "public", "data", "categories", board);
                        const categoryToRemove = (allCategories[board] || []).find(c => c.name === categoryName);
                        if (categoryToRemove) {
                            await updateDoc(catDocRef, { list: arrayRemove(categoryToRemove) });
                            alert('Category deleted successfully!');
                        }
                    } else if (type === 'board' && boardId) {
                        await deleteDoc(doc(db, "artifacts", appId, "public", "data", "boards", boardId));
                        await deleteDoc(doc(db, "artifacts", appId, "public", "data", "categories", boardId));
                        alert('Board deleted successfully!');
                    } else if (type === 'database-reset') {
                        await resetDatabase();
                    }
                } catch (error) {
                    console.error("Error deleting document: ", error);
                    alert('Error deleting item. See console for details.');
                } finally {
                    closeModal(deleteConfirmModal);
                }
            });
        }

        async function seedDatabase() {
            const projectsCol = collection(db, "artifacts", appId, "public", "data", "projects");
            const categoriesCol = collection(db, "artifacts", appId, "public", "data", "categories");
            const boardsCol = collection(db, "artifacts", appId, "public", "data", "boards");

            const batch = writeBatch(db);
            
            // Seed Boards
            baseData.boards.forEach(board => {
                const boardDocRef = doc(db, "artifacts", appId, "public", "data", "boards", board.id);
                batch.set(boardDocRef, board);
            });

            // Seed Projects
            Object.keys(baseData.projects).forEach(board => {
                if (board === 'mini') {
                    baseData.projects.mini.forEach(title => {
                        const newDocRef = doc(collection(db, "artifacts", appId, "public", "data", "projects"));
                        batch.set(newDocRef, { title, board, category: "" });
                    });
                } else {
                    Object.keys(baseData.projects[board]).forEach(category => {
                        baseData.projects[board][category].forEach(title => {
                            const newDocRef = doc(collection(db, "artifacts", appId, "public", "data", "projects"));
                            batch.set(newDocRef, { title, board, category });
                        });
                    });
                }
            });

            // Seed Categories
            Object.keys(baseData.categories).forEach(boardId => {
                const catDocRef = doc(db, "artifacts", appId, "public", "data", "categories", boardId);
                batch.set(catDocRef, { list: baseData.categories[boardId] });
            });
            
            await batch.commit();
        }

        async function resetDatabase() {
            const collections = ['projects', 'categories', 'boards'];
            const batch = writeBatch(db);

            for (const col of collections) {
                const snapshot = await getDocs(collection(db, "artifacts", appId, "public", "data", col));
                snapshot.docs.forEach(doc => batch.delete(doc.ref));
            }
            await batch.commit();
            await seedDatabase();
            alert("Database has been reset to the original template.");
        }

        // --- INITIALIZATION ---
        async function main() {
            feather.replace();
            setupModalHandlers();
            setupAdminFeatures();

            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
                
                const projectsCol = collection(db, "artifacts", appId, "public", "data", "projects");
                const categoriesCol = collection(db, "artifacts", appId, "public", "data", "categories");
                const boardsCol = collection(db, "artifacts", appId, "public", "data", "boards");
                
                onSnapshot(boardsCol, async (boardSnapshot) => {
                    if (boardSnapshot.empty) {
                        await seedDatabase();
                    } else {
                        allBoards = boardSnapshot.docs.map(doc => doc.data());
                        
                        onSnapshot(categoriesCol, (catSnapshot) => {
                            allCategories = {};
                            catSnapshot.docs.forEach(doc => {
                                allCategories[doc.id] = doc.data().list;
                            });

                            onSnapshot(projectsCol, (projSnapshot) => {
                                firestoreProjects = projSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                                allProjects = {};
                                allBoards.forEach(b => allProjects[b.id] = b.id === 'mini' ? [] : {});

                                firestoreProjects.forEach(project => {
                                    if (project.board === 'mini') {
                                        if (!allProjects.mini) allProjects.mini = [];
                                        allProjects.mini.push(project.title);
                                    } else if (allProjects[project.board]) {
                                        if (!allProjects[project.board][project.category]) {
                                            allProjects[project.board][project.category] = [];
                                        }
                                        allProjects[project.board][project.category].push(project.title);
                                    }
                                });
                                
                                // Now that all data is loaded, render the UI
                                renderProjectCategoryCards();
                                updateBoardDropdowns();
                                updateCategoryDropdown();
                                renderAllLists();
                                populateManagementConsole();
                            });
                        });
                    }
                });

            } catch (error) {
                console.error("Firebase initialization or authentication failed:", error);
            }
        }

        main();

    </script>

</body>
</html>
